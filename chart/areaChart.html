<!DOCTYPE html>
<html lang="en">

<head>
    <title>G2 面积图</title>
    <style>
        #app {
            margin: 50px auto;
            text-align: center;
        }
    </style>
</head>
<!--vue-->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://gw.alipayobjects.com/os/lib/antv/g2/3.4.10/dist/g2.min.js"></script>
<script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.data-set-0.10.1/dist/data-set.min.js"></script>

<body>
    <div id="app">
        <h2>{{ msg }}</h2>
        <div style="width: 50%; margin-left: 200px;" id="c1"></div>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                msg: '',
                chart: null, // 创建一个chart变量
                data: [
                    {
                        "Data": "2010-01",
                        "sales": 1998
                    },
                    {
                        "Data": "2010-02",
                        "sales": 1850
                    },
                    {
                        "Data": "2010-03",
                        "sales": 1720
                    },
                    {
                        "Data": "2010-04",
                        "sales": 1818
                    },
                    {
                        "Data": "2010-05",
                        "sales": 1920
                    },
                    {
                        "Data": "2010-06",
                        "sales": 1802
                    },
                    {
                        "Data": "2010-07",
                        "sales": 1945
                    },
                    {
                        "Data": "2010-08",
                        "sales": 1856
                    },
                    {
                        "Data": "2010-09",
                        "sales": 2107
                    },
                    {
                        "Data": "2010-10",
                        "sales": 2140
                    },
                    {
                        "Data": "2010-11",
                        "sales": 2311
                    },
                    {
                        "Data": "2010-12",
                        "sales": 1972
                    },
                    {
                        "Data": "2011-01",
                        "sales": 1760
                    },
                    {
                        "Data": "2011-02",
                        "sales": 1824
                    },
                    {
                        "Data": "2011-03",
                        "sales": 1801
                    },
                    {
                        "Data": "2011-04",
                        "sales": 2001
                    },
                    {
                        "Data": "2011-05",
                        "sales": 1640
                    },
                    {
                        "Data": "2011-06",
                        "sales": 1502
                    },
                    {
                        "Data": "2011-07",
                        "sales": 1621
                    },
                    {
                        "Data": "2011-08",
                        "sales": 1480
                    },
                    {
                        "Data": "2011-09",
                        "sales": 1549
                    },
                    {
                        "Data": "2011-10",
                        "sales": 1390
                    },
                    {
                        "Data": "2011-11",
                        "sales": 1325
                    },
                    {
                        "Data": "2011-12",
                        "sales": 1250
                    },
                    {
                        "Data": "2012-01",
                        "sales": 1394
                    },
                    {
                        "Data": "2012-02",
                        "sales": 1406
                    },
                    {
                        "Data": "2012-03",
                        "sales": 1578
                    },
                    {
                        "Data": "2012-04",
                        "sales": 1465
                    },
                    {
                        "Data": "2012-05",
                        "sales": 1689
                    },
                    {
                        "Data": "2012-06",
                        "sales": 1755
                    },
                    {
                        "Data": "2012-07",
                        "sales": 1495
                    },
                    {
                        "Data": "2012-08",
                        "sales": 1508
                    },
                    {
                        "Data": "2012-09",
                        "sales": 1433
                    },
                    {
                        "Data": "2012-10",
                        "sales": 1344
                    },
                    {
                        "Data": "2012-11",
                        "sales": 1201
                    },
                    {
                        "Data": "2012-12",
                        "sales": 1065
                    },
                    {
                        "Data": "2013-01",
                        "sales": 1255
                    },
                    {
                        "Data": "2013-02",
                        "sales": 1429
                    },
                    {
                        "Data": "2013-03",
                        "sales": 1398
                    },
                    {
                        "Data": "2013-04",
                        "sales": 1678
                    },
                    {
                        "Data": "2013-05",
                        "sales": 1524
                    },
                    {
                        "Data": "2013-06",
                        "sales": 1688
                    },
                    {
                        "Data": "2013-07",
                        "sales": 1500
                    },
                    {
                        "Data": "2013-08",
                        "sales": 1670
                    },
                    {
                        "Data": "2013-09",
                        "sales": 1734
                    },
                    {
                        "Data": "2013-10",
                        "sales": 1699
                    },
                    {
                        "Data": "2013-11",
                        "sales": 1508
                    },
                    {
                        "Data": "2013-12",
                        "sales": 1680
                    },
                    {
                        "Data": "2014-01",
                        "sales": 1750
                    },
                    {
                        "Data": "2014-02",
                        "sales": 1602
                    },
                    {
                        "Data": "2014-03",
                        "sales": 1834
                    },
                    {
                        "Data": "2014-04",
                        "sales": 1722
                    },
                    {
                        "Data": "2014-05",
                        "sales": 1430
                    },
                    {
                        "Data": "2014-06",
                        "sales": 1280
                    },
                    {
                        "Data": "2014-07",
                        "sales": 1367
                    },
                    {
                        "Data": "2014-08",
                        "sales": 1155
                    },
                    {
                        "Data": "2014-09",
                        "sales": 1289
                    },
                    {
                        "Data": "2014-10",
                        "sales": 1104
                    },
                    {
                        "Data": "2014-11",
                        "sales": 1246
                    },
                    {
                        "Data": "2014-12",
                        "sales": 1098
                    },
                    {
                        "Data": "2015-01",
                        "sales": 1189
                    },
                    {
                        "Data": "2015-02",
                        "sales": 1276
                    },
                    {
                        "Data": "2015-03",
                        "sales": 1033
                    },
                    {
                        "Data": "2015-04",
                        "sales": 956
                    },
                    {
                        "Data": "2015-05",
                        "sales": 845
                    },
                    {
                        "Data": "2015-06",
                        "sales": 1089
                    },
                    {
                        "Data": "2015-07",
                        "sales": 944
                    },
                    {
                        "Data": "2015-08",
                        "sales": 1043
                    },
                    {
                        "Data": "2015-09",
                        "sales": 893
                    },
                    {
                        "Data": "2015-10",
                        "sales": 840
                    },
                    {
                        "Data": "2015-11",
                        "sales": 934
                    },
                    {
                        "Data": "2015-12",
                        "sales": 810
                    },
                    {
                        "Data": "2016-01",
                        "sales": 782
                    },
                    {
                        "Data": "2016-02",
                        "sales": 1089
                    },
                    {
                        "Data": "2016-03",
                        "sales": 745
                    },
                    {
                        "Data": "2016-04",
                        "sales": 680
                    },
                    {
                        "Data": "2016-05",
                        "sales": 802
                    },
                    {
                        "Data": "2016-06",
                        "sales": 697
                    },
                    {
                        "Data": "2016-07",
                        "sales": 583
                    },
                    {
                        "Data": "2016-08",
                        "sales": 456
                    },
                    {
                        "Data": "2016-09",
                        "sales": 524
                    },
                    {
                        "Data": "2016-10",
                        "sales": 398
                    },
                    {
                        "Data": "2016-11",
                        "sales": 278
                    },
                    {
                        "Data": "2016-12",
                        "sales": 195
                    },
                    {
                        "Data": "2017-01",
                        "sales": 145
                    },
                    {
                        "Data": "2017-02",
                        "sales": 207
                    }
                ]
            },
            mounted() {
                this.msg = 'vue案例-环状图'
                // 初始化chart
                this.chart = new G2.Chart({
                    container: 'c1',
                    forceFit: true,
                    height: window.innerHeight,
                    padding: [20, 40, 50, 50]
                });
                this.chart.source(this.data);
                this.chart.scale('Data', {
                    range: [0, 1],
                    tickCount: 10,
                    type: 'timeCat'
                });
                this.chart.axis('Data', {
                    label: {
                        textStyle: {
                            fill: '#aaaaaa'
                        }
                    }
                });
                this.chart.axis('sales', {
                    label: {
                        textStyle: {
                            fill: '#aaaaaa'
                        },
                        formatter: function formatter(text) {
                            return text.replace(/(\d)(?=(?:\d{3})+$)/g, '$1,');
                        }
                    }
                });
                this.chart.tooltip({
                    crosshairs: 'y',
                    share: true
                });
                this.chart.legend({
                    attachLast: true
                });
                this.chart.line().position('Data*sales');
                this.chart.area().position('Data*sales');
                this.chart.render();
                // 模拟更新数据
                setInterval(() => {
                    var newData = [
                        {
                            "Data": "2010-01",
                            "sales": 1998
                        },
                        {
                            "Data": "2010-02",
                            "sales": 1850
                        },
                        {
                            "Data": "2010-03",
                            "sales": 1720
                        },
                        {
                            "Data": "2010-04",
                            "sales": 1818
                        },
                        {
                            "Data": "2010-05",
                            "sales": 1920
                        },
                        {
                            "Data": "2010-06",
                            "sales": 1802
                        },
                        {
                            "Data": "2010-07",
                            "sales": 1945
                        },
                        {
                            "Data": "2010-08",
                            "sales": 1856
                        },
                        {
                            "Data": "2010-09",
                            "sales": 2107
                        },
                        {
                            "Data": "2010-10",
                            "sales": 2140
                        },
                        {
                            "Data": "2010-11",
                            "sales": 2311
                        },
                        {
                            "Data": "2010-12",
                            "sales": 1972
                        },
                        {
                            "Data": "2011-01",
                            "sales": 1760
                        },
                        {
                            "Data": "2011-02",
                            "sales": 1824
                        },
                        {
                            "Data": "2011-03",
                            "sales": 1801
                        },
                        {
                            "Data": "2011-04",
                            "sales": 2001
                        },
                        {
                            "Data": "2011-05",
                            "sales": 1640
                        },
                        {
                            "Data": "2011-06",
                            "sales": 1502
                        },
                        {
                            "Data": "2011-07",
                            "sales": 1621
                        },
                        {
                            "Data": "2011-08",
                            "sales": 1480
                        },
                        {
                            "Data": "2011-09",
                            "sales": 1549
                        },
                        {
                            "Data": "2011-10",
                            "sales": 1390
                        },
                        {
                            "Data": "2011-11",
                            "sales": 1325
                        },
                        {
                            "Data": "2011-12",
                            "sales": 1250
                        },
                        {
                            "Data": "2012-01",
                            "sales": 1394
                        },
                        {
                            "Data": "2012-02",
                            "sales": 1406
                        },
                        {
                            "Data": "2012-03",
                            "sales": 1578
                        },
                        {
                            "Data": "2012-04",
                            "sales": 1465
                        },
                        {
                            "Data": "2012-05",
                            "sales": 1689
                        },
                        {
                            "Data": "2012-06",
                            "sales": 1755
                        },
                        {
                            "Data": "2012-07",
                            "sales": 1495
                        },
                        {
                            "Data": "2012-08",
                            "sales": 1508
                        },
                        {
                            "Data": "2012-09",
                            "sales": 1433
                        },
                        {
                            "Data": "2012-10",
                            "sales": 1344
                        },
                        {
                            "Data": "2012-11",
                            "sales": 1201
                        },
                        {
                            "Data": "2012-12",
                            "sales": 1065
                        },
                        {
                            "Data": "2013-01",
                            "sales": 1255
                        },
                        {
                            "Data": "2013-02",
                            "sales": 1429
                        },
                        {
                            "Data": "2013-03",
                            "sales": 1398
                        },
                        {
                            "Data": "2013-04",
                            "sales": 1678
                        },
                        {
                            "Data": "2013-05",
                            "sales": 1524
                        },
                        {
                            "Data": "2013-06",
                            "sales": 1688
                        },
                        {
                            "Data": "2013-07",
                            "sales": 1500
                        },
                        {
                            "Data": "2013-08",
                            "sales": 1670
                        },
                        {
                            "Data": "2013-09",
                            "sales": 1734
                        },
                        {
                            "Data": "2013-10",
                            "sales": 1699
                        },
                        {
                            "Data": "2013-11",
                            "sales": 1508
                        },
                        {
                            "Data": "2013-12",
                            "sales": 1680
                        },
                        {
                            "Data": "2014-01",
                            "sales": 1750
                        },
                        {
                            "Data": "2014-02",
                            "sales": 1602
                        },
                        {
                            "Data": "2014-03",
                            "sales": 1834
                        },
                        {
                            "Data": "2014-04",
                            "sales": 1722
                        },
                        {
                            "Data": "2014-05",
                            "sales": 1430
                        },
                        {
                            "Data": "2014-06",
                            "sales": 1280
                        },
                        {
                            "Data": "2014-07",
                            "sales": 1367
                        },
                        {
                            "Data": "2014-08",
                            "sales": 1155
                        },
                        {
                            "Data": "2014-09",
                            "sales": 1289
                        },
                        {
                            "Data": "2014-10",
                            "sales": 1104
                        },
                        {
                            "Data": "2014-11",
                            "sales": 1246
                        },
                        {
                            "Data": "2014-12",
                            "sales": 1098
                        },
                        {
                            "Data": "2015-01",
                            "sales": 1189
                        },
                        {
                            "Data": "2015-02",
                            "sales": 1276
                        },
                        {
                            "Data": "2015-03",
                            "sales": 1033
                        },
                        {
                            "Data": "2015-04",
                            "sales": 956
                        },
                        {
                            "Data": "2015-05",
                            "sales": 845
                        },
                        {
                            "Data": "2015-06",
                            "sales": 1089
                        },
                        {
                            "Data": "2015-07",
                            "sales": 944
                        },
                        {
                            "Data": "2015-08",
                            "sales": 1043
                        },
                        {
                            "Data": "2015-09",
                            "sales": 893
                        },
                        {
                            "Data": "2015-10",
                            "sales": 840
                        },
                        {
                            "Data": "2015-11",
                            "sales": 934
                        },
                        {
                            "Data": "2015-12",
                            "sales": 810
                        },
                        {
                            "Data": "2016-01",
                            "sales": 782
                        },
                        {
                            "Data": "2016-02",
                            "sales": 1089
                        },
                        {
                            "Data": "2016-03",
                            "sales": 745
                        },
                        {
                            "Data": "2016-04",
                            "sales": 680
                        },
                        {
                            "Data": "2016-05",
                            "sales": 802
                        },
                        {
                            "Data": "2016-06",
                            "sales": 697
                        },
                        {
                            "Data": "2016-07",
                            "sales": 583
                        },
                        {
                            "Data": "2016-08",
                            "sales": 456
                        },
                        {
                            "Data": "2016-09",
                            "sales": 524
                        },
                        {
                            "Data": "2016-10",
                            "sales": 398
                        },
                        {
                            "Data": "2016-11",
                            "sales": 278
                        },
                        {
                            "Data": "2016-12",
                            "sales": 195
                        },
                        {
                            "Data": "2017-01",
                            "sales": 145
                        },
                        {
                            "Data": "2017-02",
                            "sales": 207
                        },
                        {
                            "Data": "2017-03",
                            "sales": 207
                        },
                        {
                            "Data": "2017-04",
                            "sales": 205
                        },
                        {
                            "Data": "2017-05",
                            "sales": 206
                        },
                        {
                            "Data": "2017-06",
                            "sales": 206
                        },
                        {
                            "Data": "2017-07",
                            "sales": 207
                        },
                        {
                            "Data": "2017-08",
                            "sales": 208
                        },
                        {
                            "Data": "2017-09",
                            "sales": 200
                        }
                    ]
                    this.chart.source(newData);

                    this.chart.guide().clear();// 清理guide
                    this.chart.repaint();
                }, 3000)
            }
        })
    </script>
</body>
<style>
    .g2-guide-html {
        width: 100px;
        height: 80px;
        vertical-align: middle;
        text-align: center;
        line-height: 0.2;
    }

    .g2-guide-html .title {
        font-size: 12px;
        color: #8c8c8c;
        font-weight: 300;
    }

    .g2-guide-html .value {
        font-size: 32px;
        color: #000;
        font-weight: bold;
    }
</style>

</html>